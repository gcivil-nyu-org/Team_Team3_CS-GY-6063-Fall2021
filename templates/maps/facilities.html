<!-- templates/registration/login.html -->
{% extends 'base.html' %}

{% block title %}Facilities{% endblock %}

{% block content %}
<div style="background-color: white;">
<div style="margin-left: 1rem">
  <h1> Location {{ id }} </h1>
  <div>Name : {{ name }}</div>
  <div>Address : <span id="address"></span></div>
  {% comment %} <div>Description : {{ description }}</div>   {% endcomment %}

    <h2>Facility information</h2>
    <div>
      <ul>
        <li>Dimensions : {{ dimensions }}</li>
        <li>Accessible : {{ accessible }}</li>
        <li>Wheelchair : {{ wheelchair }}</li>
      <ul>
    </div>
    <div>
    <h2>Sports Available</h2>
      <ul>
      <li>Bocce : {{ bocce }}</li>
      <li>Frisbee : {{ frisbee }}</li>
      <li>Track : {{ track }}</li>
      <li>Adult Baseball : {{ adultBaseball }}</li>
      <li>Adult Football: {{ adultFootball }}</li>
      <li>Adult Softball : {{ adultSoftball }}</li>
      <li>Basketball : {{ basketball }}</li>
      <li>Cricket : {{ cricket }}</li>
      <li>Flag Football: {{ flagFootball }}</li>
      <li>Handball : {{ handball }}</li>
      <li>Hockey : {{ hockey }}</li>
      <li>Kickball : {{ kickball }}</li>
      <li>Lacrosse : {{ lacrosse }}</li>
      <li>Little League Softball: {{  littleLeagueSoftball }}</li>
      <li>Netball : {{ netball }}</li>
      <li>Rugby : {{ rugby }}</li>
      <li>Volleyball : {{ volleyball }}</li>
      <li>Youth Football: {{ youthFootball}}</li>
      <li>Tennis : {{ tennis }}</li>
      <li>Track : {{ track }}</li>
    <ul>
  </div>


  <h2>Events at this location</h2>
  <div style="display: flex; flex-direction:row; flex-wrap: wrap">
    {% for event in events %}
      <div class="card" style="width: 20rem; margin: 1rem; border: 0.1rem solid black">
        <div class="card-body">
        <h1>
          <a href="{% url 'event-detail' event.id %}">{{event.name}}</a>
        </h1>
        <p>{{event.description}}</p>
        <p>{{event.address}}</p>
        <p>{{event.date}}</p>
        <p>Creator: {{event.owner}}</p>
        </div>
      </div>
    {% endfor %}
    
  </div>



  <a class="btn btn-primary" href="{% url 'add-event' sport id %}" style="margin-bottom: 1rem">Create A {{sport.capitalize}} Event</a>

</div>
</div>

<script>
  const getAddress = async () => {
    await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/{{ coordinates.0.0.0.0 }},{{ coordinates.0.0.0.1 }}.json?access_token={{ mapbox_access_token }}`)
      .then((response) => {
        return response.json();
      })
      .then((myJson) => {
        const ADDRESS_INDEX = 0;
        const address = myJson.features[ADDRESS_INDEX].place_name;
        document.getElementById("address").textContent = address;
        return address;
      });
  }

  getAddress();
</script>

{% endblock %}
